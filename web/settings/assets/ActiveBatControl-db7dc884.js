import{C as y}from"./index-53a67d54.js";import{l as V,_ as $,a8 as C,a9 as E,F}from"./vendor-fortawesome-641b8eb6.js";import{_ as N,u as m,l as o,m as l,A as b,G as i,E as r,B as a,z as s,x as c,D as k,N as M,M as L,F as z}from"./vendor-50125810.js";import"./vendor-bootstrap-01761fad.js";import"./vendor-jquery-a46fe321.js";import"./vendor-axios-1a87d4ae.js";import"./vendor-sortablejs-8982fad4.js";V.add($,C,E);const U={name:"OpenwbPVChargeConfigView",components:{FontAwesomeIcon:F},mixins:[y],emits:["save","reset","defaults"],data(){return{mqttTopicsToSubscribe:["openWB/general/extern","openWB/general/chargemode_config/pv_charging/bat_mode","openWB/general/chargemode_config/pv_charging/bat_power_reserve","openWB/general/chargemode_config/pv_charging/bat_power_reserve_active","openWB/general/chargemode_config/pv_charging/bat_power_discharge","openWB/general/chargemode_config/pv_charging/bat_power_discharge_active","openWB/general/chargemode_config/pv_charging/min_bat_soc","openWB/general/chargemode_config/pv_charging/max_bat_soc","openWB/bat/config/bat_control_permitted","openWB/bat/config/bat_control_activated","openWB/bat/get/power_limit_controllable","openWB/bat/+/get/max_charge_power","openWB/bat/+/get/max_discharge_power","openWB/bat/config/bat_control_min_soc","openWB/bat/config/bat_control_max_soc","openWB/bat/config/power_limit_mode","openWB/bat/config/power_limit_condition","openWB/bat/config/manual_mode","openWB/bat/config/price_limit_activated","openWB/bat/config/price_limit","openWB/bat/config/price_charge_activated","openWB/bat/config/charge_limit","openWB/system/device/+/component/+/config","openWB/bat/+/get/power_limit_controllable"]}},computed:{batMode:{get(){return this.$store.state.mqtt["openWB/general/chargemode_config/pv_charging/bat_mode"]},set(t){this.updateState("openWB/general/chargemode_config/pv_charging/bat_mode",t)}},numBatteriesInstalled:{get(){return Object.keys(this.batteryConfigs).length}},batteryConfigs:{get(){return this.$store.state.mqtt["openWB/general/extern"]===!0?{}:this.filterComponentsByType(this.getWildcardTopics("openWB/system/device/+/component/+/config"),"bat")}},controllableBatteryConfigs:{get(){return this.$store.state.mqtt["openWB/general/extern"]===!0?{}:this.filterControllableBatteries(this.getWildcardTopics("openWB/system/device/+/component/+/config"))}},containsNormalBatteries:{get(){return this.$store.state.mqtt["openWB/general/extern"]===!0?!1:Object.keys(this.filterNormalBatteries(this.getWildcardTopics("openWB/system/device/+/component/+/config"))).length>0}}},methods:{getLimitControllable(t){return this.$store.state.mqtt["openWB/bat/"+t+"/get/power_limit_controllable"]},filterComponentsByType(t,e){return Object.keys(t).filter(d=>t[d].type.includes(e)).reduce((d,W)=>({...d,[W]:t[W]}),{})},filterControllableBatteries(t){return Object.keys(t).filter(e=>t[e].type.includes("bat")&&t[e].configuration.power_limit_controllable===!0).reduce((e,d)=>({...e,[d]:t[d]}),{})},filterNormalBatteries(t){return Object.keys(t).filter(e=>t[e].type.includes("bat")&&this.getLimitControllable(t[e].id)===!1).reduce((e,d)=>({...e,[d]:t[d]}),{})}}},D={class:"batteryConfig"},P={name:"batteryConfigForm"},A={key:0},R={key:1},T={key:0},H={key:1},O={key:2},I={key:0},j={key:0},J={key:1},G={key:0},K={key:0},Q={key:0},X={key:1},Y={key:2},Z={key:0},x={key:1},ee={key:2},te={key:0},ne={key:0},re={key:1},ie={key:2},ae={key:1},oe={key:2},le={key:1};function se(t,e,d,W,de,p){const u=m("openwb-base-alert"),f=m("font-awesome-icon"),g=m("openwb-base-button-group-input"),v=m("openwb-base-range-input"),h=m("openwb-base-heading"),_=m("openwb-base-number-input"),B=m("openwb-base-card"),q=m("openwb-base-submit-buttons");return o(),l("div",D,[b("form",P,[i(B,{title:"Passive Speicherbeachtung (PV)"},{default:r(()=>[t.$store.state.mqtt["openWB/general/extern"]===!0?(o(),l("div",A,[i(u,{subtype:"info"},{default:r(()=>[...e[22]||(e[22]=[a(' Diese Einstellungen sind nicht verfügbar, solange sich diese openWB im Steuerungsmodus "secondary" befindet. ',-1)])]),_:1})])):(o(),l("div",R,[i(u,{subtype:"info"},{default:r(()=>[...e[23]||(e[23]=[a(' Die Regelmodi der Speicherbeachtung erfolgen "passiv" durch Anpassung der Fahrzeug-Ladeleistung. PV-Überschuss wird, je nach Konfiguration, entweder dem Fahrzeug zugeteilt oder dem Speicher überlassen. Netz- und Speicherbezug wird, sofern nicht anders konfiguriert, vermieden. ',-1)])]),_:1}),i(g,{modelValue:p.batMode,"onUpdate:modelValue":e[0]||(e[0]=n=>p.batMode=n),title:"Ladepriorität",buttons:[{buttonValue:"ev_mode"},{buttonValue:"bat_mode"},{buttonValue:"min_soc_bat_mode"}]},{"label-ev_mode":r(()=>[i(f,{"fixed-width":"",icon:["fas","car-side"]}),e[24]||(e[24]=a(" Fahrzeuge ",-1))]),"label-bat_mode":r(()=>[i(f,{"fixed-width":"",icon:["fas","fa-car-battery"]}),e[25]||(e[25]=a(" Speicher ",-1))]),"label-min_soc_bat_mode":r(()=>[i(f,{"fixed-width":"",icon:["fas","fa-battery-half"]}),e[26]||(e[26]=a(" Nach SoC des Speichers ",-1))]),help:r(()=>[p.batMode==="ev_mode"?(o(),l("div",T," Der gesamte Überschuss wird in das EV geladen. Wird mehr Überschuss erzeugt als die Fahrzeuge abnehmen, findet auch eine Speicherladung statt. ")):s("",!0),p.batMode==="bat_mode"?(o(),l("div",H," Der gesamte Überschuss wird in den Speicher geladen. Ist die maximale Ladeleistung des Speichers erreicht und es wird eingespeist, wird dieser Überschuss unter Beachtung der Einschaltschwelle in die Fahrzeuge geladen. ")):s("",!0),p.batMode==="min_soc_bat_mode"?(o(),l("div",O,' Verhält sich bis zum Erreichen des Mindest-SoC wie "Ladepriorität Speicher" und oberhalb des Mindest-SoC wie "Ladepriorität Fahrzeuge". Die maximale Leistung der Speicherbe- und entladung lässt sich hier festlegen. ')):s("",!0)]),_:1},8,["modelValue"]),p.batMode==="min_soc_bat_mode"?(o(),l("div",I,[i(v,{title:"Mindest-SoC des Speichers",min:0,max:100,step:1,unit:"%",required:"","model-value":t.$store.state.mqtt["openWB/general/chargemode_config/pv_charging/min_bat_soc"],"onUpdate:modelValue":e[1]||(e[1]=n=>(t.updateState("openWB/general/chargemode_config/pv_charging/min_bat_soc",n),t.updateState("openWB/general/chargemode_config/pv_charging/max_bat_soc",t.$store.state.mqtt["openWB/general/chargemode_config/pv_charging/min_bat_soc"]<t.$store.state.mqtt["openWB/general/chargemode_config/pv_charging/max_bat_soc"]?t.$store.state.mqtt["openWB/general/chargemode_config/pv_charging/max_bat_soc"]:n)))},{help:r(()=>[...e[27]||(e[27]=[a(" Unterhalb des Mindest SoC wird vorhandener PV-Überschuss bevorzugt in den Speicher geladen. Oberhalb des Mindest-SoC hat die Fahrzeugladung Priorität. ",-1)])]),_:1},8,["model-value"]),i(v,{title:"Maximal-SoC des Speichers",min:0,max:100,step:1,unit:"%",required:"","model-value":t.$store.state.mqtt["openWB/general/chargemode_config/pv_charging/max_bat_soc"],"onUpdate:modelValue":e[2]||(e[2]=n=>(t.updateState("openWB/general/chargemode_config/pv_charging/max_bat_soc",n),t.updateState("openWB/general/chargemode_config/pv_charging/min_bat_soc",t.$store.state.mqtt["openWB/general/chargemode_config/pv_charging/max_bat_soc"]>t.$store.state.mqtt["openWB/general/chargemode_config/pv_charging/min_bat_soc"]?t.$store.state.mqtt["openWB/general/chargemode_config/pv_charging/min_bat_soc"]:n)))},{help:r(()=>[...e[28]||(e[28]=[a(" Wird der Maximal-SoC überschritten, darf der Speicher bis zum Erreichen des Mindest-SoC zur Fahrzeugladung mitbenutzt werden. ",-1)])]),_:1},8,["model-value"]),t.$store.state.mqtt["openWB/general/chargemode_config/pv_charging/min_bat_soc"]==t.$store.state.mqtt["openWB/general/chargemode_config/pv_charging/max_bat_soc"]?(o(),c(u,{key:0,subtype:"info"},{default:r(()=>[...e[29]||(e[29]=[a(" Bei identischen SoC Angaben findet keine Speicherhysterese statt. ",-1)])]),_:1})):s("",!0),i(h,null,{default:r(()=>[...e[30]||(e[30]=[a(" Speicher-Ladeleistung unterhalb Mindest-SoC ",-1)])]),_:1}),i(g,{title:"Nur eine bestimmte Ladeleistung reservieren",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"model-value":t.$store.state.mqtt["openWB/general/chargemode_config/pv_charging/bat_power_reserve_active"],"onUpdate:modelValue":e[3]||(e[3]=n=>t.updateState("openWB/general/chargemode_config/pv_charging/bat_power_reserve_active",n))},k({_:2},[t.$store.state.mqtt["openWB/general/chargemode_config/pv_charging/bat_power_reserve_active"]?{name:"help",fn:r(()=>[e[31]||(e[31]=a(" ACHTUNG: Der hier eingestellte Wert darf die maximale Ladeleistung des Speichers nicht überschreiten!",-1)),e[32]||(e[32]=b("br",null,null,-1)),e[33]||(e[33]=a(" Befindet sich der Speicher unterhalb des Mindest-SoC, wird er mit der hier eingestellten Speicherladeleistung geladen. Verbleibender Überschuss wird in die Fahrzeuge geladen. ",-1))]),key:"0"}:{name:"help",fn:r(()=>[e[34]||(e[34]=a(" Befindet sich der Speicher unterhalb des Mindest-SoC, wird er priorisiert geladen. ",-1))]),key:"1"}]),1032,["model-value"]),t.$store.state.mqtt["openWB/general/chargemode_config/pv_charging/bat_power_reserve_active"]?(o(),c(_,{key:1,title:"Reservierte Ladeleistung",min:.1,step:.1,unit:"kW",required:"","model-value":t.$store.state.mqtt["openWB/general/chargemode_config/pv_charging/bat_power_reserve"]/1e3,"onUpdate:modelValue":e[4]||(e[4]=n=>t.updateState("openWB/general/chargemode_config/pv_charging/bat_power_reserve",n*1e3))},null,8,["model-value"])):s("",!0),i(h,null,{default:r(()=>[...e[35]||(e[35]=[a(" Speicher-SoC oberhalb Maximal-SoC ",-1)])]),_:1}),i(g,{title:"Entladung des Speichers erlauben",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"model-value":t.$store.state.mqtt["openWB/general/chargemode_config/pv_charging/bat_power_discharge_active"],"onUpdate:modelValue":e[5]||(e[5]=n=>t.updateState("openWB/general/chargemode_config/pv_charging/bat_power_discharge_active",n))},k({_:2},[t.$store.state.mqtt["openWB/general/chargemode_config/pv_charging/bat_power_discharge_active"]?{name:"help",fn:r(()=>[e[36]||(e[36]=a(" ACHTUNG: Der hier eingestellte Wert darf die maximale Entadeleistung des Speichers nicht überschreiten! Wird der Maximal-SoC überschritten, wird die PV-Ladung mit der hier eingestellten Speicherentladeleistung unterstützt. Der Speicher darf bis zum Mindest-SoC entladen werden. Die erlaubte Entladeleistung des Speichers wird dem Überschuss zum Erreichen der Einschaltschwelle hinzugerechnet. ",-1))]),key:"0"}:{name:"help",fn:r(()=>[e[37]||(e[37]=a(" Oberhalb des Maximal-SoC wird der Speicher nicht für die Fahrzeugladung mitgenutzt. ",-1))]),key:"1"}]),1032,["model-value"]),t.$store.state.mqtt["openWB/general/chargemode_config/pv_charging/bat_power_discharge_active"]?(o(),c(_,{key:2,title:"Erlaubte Entladeleistung",min:.1,step:.1,unit:"kW",required:"","model-value":t.$store.state.mqtt["openWB/general/chargemode_config/pv_charging/bat_power_discharge"]/1e3,"onUpdate:modelValue":e[6]||(e[6]=n=>t.updateState("openWB/general/chargemode_config/pv_charging/bat_power_discharge",n*1e3))},null,8,["model-value"])):s("",!0)])):s("",!0)]))]),_:1}),i(B,{title:"Aktive Speichersteuerung"},{default:r(()=>[t.$store.state.mqtt["openWB/general/extern"]===!0?(o(),l("div",j,[i(u,{subtype:"info"},{default:r(()=>[...e[38]||(e[38]=[a(' Diese Einstellungen sind nicht verfügbar, solange sich diese openWB im Steuerungsmodus "secondary" befindet. ',-1)])]),_:1})])):(o(),l("div",J,[i(u,{subtype:"info",class:"mb-3"},{default:r(()=>[e[39]||(e[39]=b("p",null,[a(" Die aktive Speichersteuerung durch openWB basiert auf öffentlich zugänglichen Informationen zu den verschiedenen Speichersystemen. Diese können auch nicht herstellerseitig freigegebene Informationen beinhalten."),b("br"),a(' Fragen bezüglich der Gewährleistung und Hardwarekompatibilität sind vor der Nutzung mit dem Hersteller zu klären. openWB übernimmt keine Haftung für Schäden, welche aus der Nutzung der "aktiven Speichersteuerung" entstehen. ')],-1)),i(g,{title:"Hinweise zur aktiven Speichersteuerung gelesen und akzeptiert",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"model-value":t.$store.state.mqtt["openWB/bat/config/bat_control_permitted"],"onUpdate:modelValue":e[7]||(e[7]=n=>t.updateState("openWB/bat/config/bat_control_permitted",n))},null,8,["model-value"])]),_:1}),t.$store.state.mqtt["openWB/bat/config/bat_control_permitted"]===!0?(o(),l("div",G,[i(h,{class:"mt-0"},{default:r(()=>[...e[40]||(e[40]=[a(" Regelmodi der aktiven Speichersteuerung ",-1)])]),_:1}),i(u,{subtype:"info"},{default:r(()=>[...e[41]||(e[41]=[a(" Die aktive Speichersteuerung kann Speicherentladung begrenzen oder den Speicher zur Ladung zwingen. Die erlaubte Entladeleistung des Speichers (Speicherbeachtung PV) wird bei aktiver Speichersteuerung überschrieben, da Speicherentladung unter Umständen aktiv begrenzt wird. ",-1)])]),_:1}),i(g,{title:"Speicher aktiv Steuern",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"model-value":t.$store.state.mqtt["openWB/bat/config/bat_control_activated"],"onUpdate:modelValue":e[8]||(e[8]=n=>t.updateState("openWB/bat/config/bat_control_activated",n))},k({_:2},[t.$store.state.mqtt["openWB/bat/config/bat_control_activated"]?{name:"help",fn:r(()=>[e[42]||(e[42]=a(" Speicher wird aktiv gesteuert. Grundlage ist die nachfolgende Konfiguration. ",-1))]),key:"0"}:{name:"help",fn:r(()=>[e[43]||(e[43]=a(" Speicher wird nicht aktiv gesteuert, sondern regelt eigenständig.",-1)),e[44]||(e[44]=b("br",null,null,-1)),e[45]||(e[45]=a(" Es greifen die Regelparameter der Speicherbeachtung. ",-1))]),key:"1"}]),1032,["model-value"]),i(B,{title:"Aktiv steuerbare Speicher"},{default:r(()=>[p.containsNormalBatteries?(o(),c(u,{key:0,subtype:"danger"},{default:r(()=>[...e[46]||(e[46]=[a(" Es sind weitere, nicht steuerbare Speicher im System vorhanden. Solche Speicher führen gewöhnlich eigenständig eine Nullpunktausregelung durch, versuchen also Überschuss zu speichern (Einspeisung zu verhindern) und Netzbezug durch eigene Entladung zu vermeiden.",-1),b("br",null,null,-1),a(" Ein solcher Speicher versucht ebenso aktiv gesteuerte Speicher auszugleichen. ",-1)])]),_:1})):s("",!0),(o(!0),l(M,null,L(p.batteryConfigs,(n,S)=>(o(),l("div",{key:S},[t.$store.state.mqtt["openWB/bat/"+n.id+"/get/power_limit_controllable"]===!0?(o(),c(B,{key:S,title:n.name+" (ID: "+n.id+")",collapsible:!0,collapsed:!0,subtype:"warning"},{header:r(()=>[i(f,{icon:["fas","fa-car-battery"]}),a(" "+z(n.name)+" (ID: "+z(n.id)+") ",1)]),default:r(()=>[(o(),c(_,{key:S,title:"Maximale Entladeleistung",min:.1,step:.1,unit:"kW",required:"","model-value":t.$store.state.mqtt["openWB/bat/"+n.id+"/get/max_discharge_power"]/1e3,"onUpdate:modelValue":w=>t.updateState("openWB/bat/"+n.id+"/get/max_discharge_power",w*1e3)},null,8,["model-value","onUpdate:modelValue"])),(o(),c(_,{key:S,title:"Maximale Ladeleistung",min:.1,step:.1,unit:"kW",required:"","model-value":t.$store.state.mqtt["openWB/bat/"+n.id+"/get/max_charge_power"]/1e3,"onUpdate:modelValue":w=>t.updateState("openWB/bat/"+n.id+"/get/max_charge_power",w*1e3)},null,8,["model-value","onUpdate:modelValue"]))]),_:2},1032,["title"])):s("",!0),e[47]||(e[47]=b("hr",null,null,-1))]))),128))]),_:1}),t.$store.state.mqtt["openWB/bat/get/power_limit_controllable"]===!0?(o(),l("div",K,[i(v,{title:"Untere Entladeschranke",min:5,max:100,step:1,unit:"%",required:"","model-value":t.$store.state.mqtt["openWB/bat/config/bat_control_min_soc"],"onUpdate:modelValue":e[9]||(e[9]=n=>(t.updateState("openWB/bat/config/bat_control_min_soc",n),t.updateState("openWB/bat/config/bat_control_max_soc",t.$store.state.mqtt["openWB/bat/config/bat_control_min_soc"]<t.$store.state.mqtt["openWB/bat/config/bat_control_max_soc"]?t.$store.state.mqtt["openWB/bat/config/bat_control_max_soc"]:n)))},{help:r(()=>[...e[48]||(e[48]=[a(' Speicher welche durch die aktive Steuerung entladen werden, schalten unterhalb des eingestellten SoC auf "Eigenregelung" um mögliche Tiefenentladung zu verhindern. Die aktive Ladung ist weiterhin möglich. ',-1)])]),_:1},8,["model-value"]),i(v,{title:"Obere Ladeschranke",min:5,max:100,step:1,unit:"%",required:"","model-value":t.$store.state.mqtt["openWB/bat/config/bat_control_max_soc"],"onUpdate:modelValue":e[10]||(e[10]=n=>(t.updateState("openWB/bat/config/bat_control_max_soc",n),t.updateState("openWB/bat/config/bat_control_min_soc",t.$store.state.mqtt["openWB/bat/config/bat_control_max_soc"]>t.$store.state.mqtt["openWB/bat/config/bat_control_min_soc"]?t.$store.state.mqtt["openWB/bat/config/bat_control_min_soc"]:n)))},{help:r(()=>[...e[49]||(e[49]=[a(" Speicher welche aktiv geladen werden sperren oberhalb des eingestellten SoC die Entladung oder schalten auf Eigenregelung des Speichers. ",-1)])]),_:1},8,["model-value"]),i(g,{modelValue:t.powerLimit,"onUpdate:modelValue":[e[11]||(e[11]=n=>t.powerLimit=n),e[12]||(e[12]=n=>t.updateState("openWB/bat/config/power_limit_mode",n))],title:"Regellimit",buttons:[{buttonValue:"mode_no_discharge",text:"volle Entladesperre"},{buttonValue:"mode_discharge_home_consumption",text:"Entladung in Fahrzeuge sperren"},{buttonValue:"mode_charge_pv_production",text:"PV-Ertrag speichern"}],"model-value":t.$store.state.mqtt["openWB/bat/config/power_limit_mode"]},{help:r(()=>[t.$store.state.mqtt["openWB/bat/config/power_limit_mode"]==="mode_no_discharge"?(o(),l("div",Q," Die Speicherentladung wird komplett gesperrt! Alle Verbraucher (Fahrzeuge, Hausverbrauch) werden durch Netzstrom und ggfs. vorhandenen PV-Überschuss versorgt. ")):s("",!0),t.$store.state.mqtt["openWB/bat/config/power_limit_mode"]==="mode_discharge_home_consumption"?(o(),l("div",X,' Die Speicherentladung in Fahrzeuge wird komplett gesperrt! Fahrzeugladung die nicht durch PV-Überschuss gedeckt werden kann erzeugt Netzbezug statt Speicherentladung. Weitere Verbraucher (bspw. Hausverbrauch) werden durch den Speicher ausgeglichen. Kann die Entladung am Speicher nur komplett gesperrt werden, verhält sich diese Einstellung wie "volle Entladesperre". ')):s("",!0),t.$store.state.mqtt["openWB/bat/config/power_limit_mode"]==="mode_charge_pv_production"?(o(),l("div",Y," PV-Ertrag wird vorrangig in den Speicher geladen (aktive Ladung)! Weiterer Verbrauch (Hausverbrauch/ Fahrzeugladung) erzeugt Netzbezug. ")):s("",!0)]),_:1},8,["modelValue","model-value"]),i(g,{title:"Regelbedingung",buttons:[{buttonValue:"manual",text:"Manuell"},{buttonValue:"vehicle_charging",text:"Fahrzeuge laden"},{buttonValue:"price_limit",text:"Preisgrenze"}],"model-value":t.$store.state.mqtt["openWB/bat/config/power_limit_condition"],"onUpdate:modelValue":e[13]||(e[13]=n=>t.updateState("openWB/bat/config/power_limit_condition",n))},{help:r(()=>[t.$store.state.mqtt["openWB/bat/config/power_limit_condition"]==="manual"?(o(),l("div",Z," Der Speicher regelt direkt entsprechend der manuellen Einstellung. ")):s("",!0),t.$store.state.mqtt["openWB/bat/config/power_limit_condition"]==="vehicle_charging"?(o(),l("div",x," Das oben eingestellte Regellimit wird angewendet sobald ein oder mehrere Fahrzeuge Laden. ")):s("",!0),t.$store.state.mqtt["openWB/bat/config/power_limit_condition"]==="price_limit"?(o(),l("div",ee," Regelung nach Preisgrenze bei variablen Strompreisen. ")):s("",!0)]),_:1},8,["model-value"]),e[57]||(e[57]=b("hr",null,null,-1)),t.$store.state.mqtt["openWB/bat/config/power_limit_condition"]==="manual"?(o(),l("div",te,[i(h,{class:"mt-0"},{default:r(()=>[...e[50]||(e[50]=[a(" Manuell ",-1)])]),_:1}),i(g,{title:"Speichersteuerung",buttons:[{buttonValue:"manual_disable",text:"Aus"},{buttonValue:"manual_limit",text:"Regellimit anwenden"},{buttonValue:"manual_charge",text:"Speicher laden"}],"model-value":t.$store.state.mqtt["openWB/bat/config/manual_mode"],"onUpdate:modelValue":e[14]||(e[14]=n=>t.updateState("openWB/bat/config/manual_mode",n))},{help:r(()=>[t.$store.state.mqtt["openWB/bat/config/manual_mode"]==="manual_disable"?(o(),l("div",ne," Aktive Speichersteuerung deaktivieren (Eigenregelung des Speichers). ")):s("",!0),t.$store.state.mqtt["openWB/bat/config/manual_mode"]==="manual_limit"?(o(),l("div",re," Es wird das weiter oben konfigurierte Regellimit angewendet. ")):s("",!0),t.$store.state.mqtt["openWB/bat/config/manual_mode"]==="manual_charge"?(o(),l("div",ie," Alle Speicher werden mit ihrer eingestellten maximalen Ladeleistung beladen. Befinden sich die Speicher über der oberen Ladeschranke wird der SoC gehalten. ")):s("",!0)]),_:1},8,["model-value"])])):s("",!0),t.$store.state.mqtt["openWB/bat/config/power_limit_condition"]==="vehicle_charging"?(o(),l("div",ae,[i(h,{class:"mt-0"},{default:r(()=>[...e[51]||(e[51]=[a(" Fahrzeuge laden ",-1)])]),_:1}),i(u,{subtype:"info"},{default:r(()=>[...e[52]||(e[52]=[a(" Dieser Modus bietet keine weiteren Einstellungen. Sobald mindestens ein Fahrzeug lädt greift das weiter oben konfigurierte Regellimit. ",-1)])]),_:1})])):s("",!0),t.$store.state.mqtt["openWB/bat/config/power_limit_condition"]==="price_limit"?(o(),l("div",oe,[i(h,{class:"mt-0"},{default:r(()=>[...e[53]||(e[53]=[a(" Preisgrenze (Variable Strompreise) ",-1)])]),_:1}),!t.$store.state.mqtt["openWB/optional/ep/flexible_tariff/provider"]||!t.$store.state.mqtt["openWB/optional/ep/flexible_tariff/provider"].type?(o(),c(u,{key:0,subtype:"warning"},{default:r(()=>[...e[54]||(e[54]=[a(" Bitte in den übergreifenden Ladeeinstellungen einen Strompreis-Anbieter konfigurieren. Ohne Strompreis-Anbieter schaltet der Speicher auf Eigenregelung. ",-1)])]),_:1})):s("",!0),i(g,{title:"Preisgrenze für Netzbezug statt Speicherentladung",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"model-value":t.$store.state.mqtt["openWB/bat/config/price_limit_activated"],"onUpdate:modelValue":e[15]||(e[15]=n=>t.updateState("openWB/bat/config/price_limit_activated",n))},{help:r(()=>[...e[55]||(e[55]=[a(" Fällt der variable Strompreis unuter diesen Wert, greift das weiter oben konfigurierte Regellimit. ",-1)])]),_:1},8,["model-value"]),i(_,{title:"Preisgrenze für Netzbezug",step:.001,precision:3,unit:"ct/kWh",required:"","model-value":t.$store.state.mqtt["openWB/bat/config/price_limit"]*1e5,"onUpdate:modelValue":e[16]||(e[16]=n=>t.updateState("openWB/bat/config/price_limit",parseFloat((n/1e5).toFixed(7))))},null,8,["model-value"]),i(g,{title:"Preisgrenze für Speicherladung mit Netzbezug",buttons:[{buttonValue:!1,text:"Nein",class:"btn-outline-danger"},{buttonValue:!0,text:"Ja",class:"btn-outline-success"}],"model-value":t.$store.state.mqtt["openWB/bat/config/price_charge_activated"],"onUpdate:modelValue":e[17]||(e[17]=n=>t.updateState("openWB/bat/config/price_charge_activated",n))},{help:r(()=>[...e[56]||(e[56]=[a(" Fällt der variable Strompreis unter diesen Wert werden alle Speicher mit ihrer eingestellten maximalen Ladeleistung beladen. Befinden sich die Speicher über der oberen Ladeschranke wird der SoC gehalten. ",-1)])]),_:1},8,["model-value"]),i(_,{title:"Preisgrenze für Speicherladung",step:.001,precision:3,unit:"ct/kWh",required:"","model-value":t.$store.state.mqtt["openWB/bat/config/charge_limit"]*1e5,"onUpdate:modelValue":e[18]||(e[18]=n=>t.updateState("openWB/bat/config/charge_limit",parseFloat((n/1e5).toFixed(7))))},null,8,["model-value"])])):s("",!0)])):(o(),l("div",le,[i(u,{subtype:"info"},{default:r(()=>[...e[58]||(e[58]=[a(" Die Speicher-Entladung ins Fahrzeug kann nicht gesteuert werden, da die Entladeleistung nicht an den/die konfigurierten Speicher übergeben werden kann. ",-1)])]),_:1})]))])):s("",!0)]))]),_:1}),i(q,{"form-name":"batteryConfigForm",onSave:e[19]||(e[19]=n=>t.$emit("save")),onReset:e[20]||(e[20]=n=>t.$emit("reset")),onDefaults:e[21]||(e[21]=n=>t.$emit("defaults"))})])])}const _e=N(U,[["render",se],["__file","/opt/openWB-dev/openwb-ui-settings/src/views/ActiveBatControl.vue"]]);export{_e as default};
